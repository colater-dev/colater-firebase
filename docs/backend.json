{
  "entities": {
    "UserProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User Profile",
      "type": "object",
      "description": "Represents a user's profile information.",
      "properties": {
        "email": {
          "type": "string",
          "format": "email",
          "description": "The user's email address."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "The timestamp when the user profile was created."
        }
      },
      "required": ["email", "createdAt"]
    },
    "Brand": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Brand",
      "type": "object",
      "description": "Represents a single brand created by a user.",
      "properties": {
        "userId": {
          "type": "string",
          "description": "The ID of the user who owns this brand."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "The timestamp when the brand was created."
        },
        "latestName": {
          "type": "string",
          "description": "The latest name of the brand."
        },
        "latestElevatorPitch": {
          "type": "string",
          "description": "The latest elevator pitch for the brand."
        },
        "latestAudience": {
          "type": "string",
          "description": "The latest target audience for the brand."
        },
        "logoUrl": {
            "type": "string",
            "format": "uri",
            "description": "URL of the currently selected brand logo."
        }
      },
      "required": ["userId", "createdAt"]
    },
    "BrandInputVersion": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Brand Input Version",
      "type": "object",
      "description": "Represents a single version of a brand input field (e.g., name, elevator pitch).",
      "properties": {
        "brandId": {
          "type": "string",
          "description": "The ID of the brand this input version belongs to."
        },
        "userId": {
          "type": "string",
          "description": "The ID of the user who owns this input version."
        },
        "inputType": {
          "type": "string",
          "enum": ["name", "elevatorPitch", "audience"],
          "description": "The type of input this version represents."
        },
        "value": {
          "type": "string",
          "description": "The value of the input at this version."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "The timestamp when this version was created."
        }
      },
      "required": ["brandId", "userId", "inputType", "value", "createdAt"]
    },
    "TaglineGeneration": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Tagline Generation",
      "type": "object",
      "description": "Represents an AI-generated tagline for a brand.",
      "properties": {
        "brandId": {
          "type": "string",
          "description": "The ID of the brand this tagline was generated for."
        },
        "userId": {
          "type": "string",
          "description": "The ID of the user who owns this tagline."
        },
        "tagline": {
          "type": "string",
          "description": "The generated tagline."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "The timestamp when the tagline was generated."
        }
      },
      "required": ["brandId", "userId", "tagline", "createdAt"]
    },
    "LogoGeneration": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "title": "Logo Generation",
        "type": "object",
        "description": "Represents an AI-generated logo for a brand.",
        "properties": {
          "brandId": {
            "type": "string",
            "description": "The ID of the brand this logo was generated for."
          },
          "userId": {
            "type": "string",
            "description": "The ID of the user who owns this logo."
          },
          "logoUrl": {
            "type": "string",
            "format": "uri",
            "description": "The data URI of the generated logo."
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "The timestamp when the logo was generated."
          }
        },
        "required": ["brandId", "userId", "logoUrl", "createdAt"]
      }
  },
  "auth": {
    "providers": ["password", "google.com"]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "UserProfile",
          "schema": {
            "$ref": "#/entities/UserProfile"
          },
          "description": "Stores public profile data for users."
        }
      },
      {
        "path": "/users/{userId}/brands/{brandId}",
        "definition": {
          "entityName": "Brand",
          "schema": {
            "$ref": "#/entities/Brand"
          },
          "description": "Stores brands created by users. Path-based ownership."
        }
      },
      {
        "path": "/users/{userId}/brands/{brandId}/inputVersions/{versionId}",
        "definition": {
          "entityName": "BrandInputVersion",
          "schema": {
            "$ref": "#/entities/BrandInputVersion"
          },
          "description": "Stores the history of changes for brand inputs. Inherits ownership from the parent brand."
        }
      },
      {
        "path": "/users/{userId}/brands/{brandId}/taglineGenerations/{generationId}",
        "definition": {
          "entityName": "TaglineGeneration",
          "schema": {
            "$ref": "#/entities/TaglineGeneration"
          },
          "description": "Stores AI-generated taglines for a brand. Inherits ownership from the parent brand."
        }
      },
      {
        "path": "/users/{userId}/brands/{brandId}/logoGenerations/{generationId}",
        "definition": {
          "entityName": "LogoGeneration",
          "schema": {
            "$ref": "#/entities/LogoGeneration"
          },
          "description": "Stores the history of AI-generated logos for a brand. Inherits ownership from the parent brand."
        }
      }
    ],
    "reasoning": "This structure enforces data ownership by scoping all user-related data under `/users/{userId}`. Brands are a subcollection of users, and input versions, tagline generations, and logo generations are subcollections of brands, ensuring a clear ownership hierarchy and enabling straightforward security rules."
  }
}
